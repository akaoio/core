# Source Code First Principle - The Fundamental Law

## Core Vision Statement

**"WHEN I ASK YOU TO CHANGE ANYTHING, YOU MUST DO IT FROM THE LOWEST LEVEL, WHICH IS SOURCE CODE."**

This is the fundamental, non-negotiable principle that governs ALL changes across the entire @akaoio/core multi-agent system. Every agent, every team, every modification must adhere to this absolute law.

## The Principle Explained

### What "Lowest Level" Means

1. **Source Code**: `.ts`, `.tsx`, `.jsx`, `.sh` files - the human-written, version-controlled source
2. **Templates**: `.hbs` Handlebars templates that generate other files
3. **Configuration**: YAML atoms, JSON configs that drive generation processes
4. **Raw Data**: The foundational input that feeds all automated processes

### What "Lowest Level" Does NOT Mean

- Built artifacts (`.js`, `.cjs`, `.mjs` files)
- Generated documentation (`README.md` from templates)
- Compiled outputs or transpiled code
- Processed files from automation
- Cached or derived content

## Why This Principle is Critical

### System Integrity
- **Single Source of Truth**: Only source code represents the actual system state
- **Durability**: Changes at source level persist through all build/generation cycles
- **Traceability**: All system behavior can be traced to specific source code

### Development Efficiency
- **No Rework**: Changes at source level don't get overwritten by automation
- **Systematic Solutions**: Root cause fixes prevent recurring issues
- **Scalable Maintenance**: Source-level changes scale across entire system

### Multi-Agent Coordination
- **Consistent Behavior**: All 34 agents work from same foundational principle
- **Predictable Outcomes**: Source-first changes create predictable system evolution
- **Knowledge Sharing**: Root cause solutions shared across Air network

## Practical Applications

### Code Changes
```bash
# ❌ WRONG: Edit built artifact
vim projects/composer/dist/Template/index.js

# ✅ RIGHT: Edit source, then rebuild
vim projects/composer/src/Template/index.ts
cd projects/composer && npm run build
```

### Documentation Updates
```bash
# ❌ WRONG: Edit generated README
vim projects/composer/README.md

# ✅ RIGHT: Edit template source
vim teams/components/readme-header.yaml
node teams/generate-with-composer.cjs
```

### Agent Modifications
```bash
# ❌ WRONG: Edit individual agent file
vim .claude/agents/team-core-fix-coordinator.md

# ✅ RIGHT: Edit template source
vim teams/templates/agent-composer.hbs
vim .claude/team.config.yaml
node teams/generate-with-composer.cjs
```

### Configuration Changes
```bash
# ❌ WRONG: Edit generated config
vim dist/config/final-config.json

# ✅ RIGHT: Edit source config
vim src/config/base-config.yaml
npm run build-config
```

## Universal Enforcement

### All 34 Agents Must Enforce
Every agent across all teams must:
1. **Identify source vs generated** before any modification
2. **Refuse to edit generated files** and redirect to source
3. **Always trace to root cause** before making changes
4. **Verify source location** before proceeding with edits

### Air Network Integration
Source-first decisions shared across living agent network:

```javascript
// Share source-level discoveries
gun.get('source-changes').get(changeId).put({
  type: 'source-first-fix',
  sourceFile: 'projects/composer/src/Template/index.ts',
  issue: 'Template generation bug',
  solution: 'Fixed type annotation in source',
  agent: agentId,
  timestamp: Date.now()
});

// Subscribe to source-level knowledge
gun.get('source-changes').on((change, key) => {
  if (change && change.type === 'source-first-fix') {
    incorporateSourceKnowledge(change);
  }
});
```

## Common Anti-Patterns to Reject

### Surface-Level Fixes
- Editing error messages in logs instead of fixing source logic
- Patching build outputs instead of correcting source inputs
- Modifying generated documentation instead of updating source content

### Symptom Treatment
- Quick fixes that mask underlying problems
- Workarounds that ignore architectural issues
- Band-aid solutions that don't address root causes

### Generated File Modifications
- Any change to files with "Generated by" headers
- Edits to dist/, build/, or output directories
- Manual patches to compiled or transpiled code

## Integration with Existing Principles

This principle reinforces and unifies:

- **ROOT CAUSE FIXING PRINCIPLE**: Always fix root cause in source code
- **UNIVERSAL BUILD ARCHITECTURE**: Never edit built artifacts
- **ZERO TECH DEBT**: No versioned files or temporary patches
- **LIVING AGENT SYSTEM**: Share source-level knowledge across network

## Enforcement Protocol

### Before Any Change
1. **Identify file type**: Source or generated?
2. **Trace to source**: What source file controls this behavior?
3. **Verify permissions**: Can this source file be edited?
4. **Plan systematic fix**: How to address root cause?

### During Changes
1. **Edit source only**: Make changes at lowest possible level
2. **Build/regenerate**: Update all derived artifacts
3. **Verify propagation**: Ensure changes appear in outputs
4. **Test systematically**: Confirm fix addresses root cause

### After Changes
1. **Document rationale**: Why this source-level change?
2. **Share knowledge**: Broadcast solution via Air network
3. **Monitor effects**: Ensure no unintended consequences
4. **Update stories**: Capture lessons learned

## Conclusion

This principle is not just a guideline - it is the foundational law that ensures system integrity, development efficiency, and multi-agent coordination. When any user asks for ANY change, the response must ALWAYS begin with identifying and modifying the appropriate source code.

**Remember**: Generated files are symptoms. Source code is the cure.

---
*Story created: 2025-08-26T16:13:17.197Z*  
*Agent: meta*  
*Vision: Source code is the single source of truth for all system behavior*